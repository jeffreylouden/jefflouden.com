/*! jeffrey-louden - v - 2014-01-07 */
!function(a){a.fn.unveil=function(b){function c(){e=k.filter(function(){var b=a(this),c=g.scrollTop(),d=c+g.height(),e=b.offset().top,f=e+b.height();return f>=c-h&&d+h>=e}),d=e.trigger("unveil"),k=k.not(d)}var d,e,f,g=a(window),h=b||0,i=window.devicePixelRatio>1,j=i?"data-src-retina":"data-src",k=this;return this.one("unveil",function(){f=this.getAttribute(j),f=f||this.getAttribute("data-src"),f&&this.setAttribute("src",f)}),g.scroll(c),g.resize(c),c(),this}}(jQuery),function(a,b,c){"use strict";var d,e,f,g="animate",h="fixed",i="hide",j="href",k="image",l="img",m="show",n="video",o=function(){},p=(b.console||{log:o,warn:o,error:o},a(b),a(c.getElementsByTagName("html"))),q=a(c.getElementsByTagName("body")),r=p.add(q),s='<iframe allowfullscreen frameborder="0" width="560" height="350" id="yt-{{{yt-id}}}" src="//www.youtube.com/embed/{{{yt-id}}}/?enablejsapi=1&amp;playerapiid={{{yt-id}}}&amp;wmode=transparent&amp;autohide=0&amp;autoplay=0&amp;fs=1&amp;hd=1&amp;rel=0&amp;showinfo=0&amp;start=&amp;theme=dark&amp;cc_load_policy=0"></iframe>',t="{{{yt-id}}}",u=new RegExp(t,"g"),v=a(".footnote"),w=(a(c.getElementsByTagName("footer")),a(c.getElementById("credits"))),x=w.find("i"),y=a(c.getElementById("party-mode")),z=a(".modal"),A={create:function(a){if(a.indexOf("youtube")>-1){var c=a.split("?v=")[1];d.prepend('<div class="vid-contain"><div class="vid">'+s.replace(u,c)+"</div></div>"),f=n,e=d.find("iframe"),e.click(function(a){a.stopPropagation()})}else{var g=new b.Image;g.onload=function(){d.prepend(g),e=d.find(l),f=k,e.click(function(a){a.stopPropagation()})},g.src=a}d.removeClass(i).addClass(m),r.addClass(h),d.find(".close").click(function(a){a.preventDefault()}),d.click(function(){A.dismiss()})},dismiss:function(){d.length>0&&(r.removeClass(h),d.removeClass(m).addClass(i),setTimeout(function(){e.remove()},200))}};z.length&&(q.append('<div id="modal"><a class="close" href="#" title="Close">Close</a></div>'),d=a("#modal")),v.on("click",function(b){var c=a(this),d=c.attr(j);b.preventDefault(),r.animate({scrollTop:a(d).offset().top-75},300)}),z.on("click",function(b){b.preventDefault(),A.create(a(this).attr(j))}),x.click(function(){r.addClass(h),y.addClass(g).addClass(m),y.on("click",function(){a(this).removeClass(m),r.removeClass(h)})}),a(c.documentElement).keyup(function(a){27===a.keyCode&&(A.dismiss(),y.removeClass(m),r.removeClass(h))}),window.location.href.indexOf("party-mode")>-1&&x.click(),a(l).unveil(100)}(jQuery,window,document);