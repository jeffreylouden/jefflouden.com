$InternetExplorerWidth: 960px !default;
$containerMaxWidth: 960px !default;
$gutter: $containerMaxWidth / 48 / ($containerMaxWidth - $containerMaxWidth / 48);
$onecol: percentage($containerMaxWidth / 16 / ($containerMaxWidth - $containerMaxWidth / 48));

$flexbox-enabled: false !default;

@mixin layout($selector, $layout) {
  #{$selector} {
    @if $layout == "row" {
      zoom: 1;
      clear: both;
      &:before,
      &:after {
        content: "";
        display: table;
      }
      &:after {
        clear: both;
      }
      @if $flexbox-enabled == true {
        display: -webkit-flex;
        display: -moz-flex;
        display: -ms-flex;
        display: -o-flex;
        display: flex;
      }
    }
    @else if $layout == "container" {
      max-width: $containerMaxWidth - $gutter;
      padding: 0 percentage($gutter) / 2;
      margin-right: auto;
      margin-left: auto;
      zoom: 1;
      &:before,
      &:after {
        content: "";
        display: table;
      }
      &:after {
        clear: both;
      }
      // UNCOMMENT FOR FALLBACK IE SUPPORT BASED ON MODERNIZR 'oldie' CLASS
      // html.oldie &
      //   width: $InternetExplorerWidth
    }
  }
}

@mixin columns($selector, $layout: false, $count: 1, $offset: 0, $push: 0, $pull: 0, $right: false, $first: false, $no-first-child: false, $width-only: false) {
  #{$selector} {
    @if $layout == "row" or $count == "row" {
      @if $layout == "row" {
        @include layout($selector, $layout);
      }
      @if $count == "row" {
        @include layout($selector, $count);
      }
    }
    @else if $layout == "container" or $count == "container" {
      @if $layout == "container" {
        @include layout($selector, $layout);
      }
      @if $count == "container" {
        @include layout($selector, $count);
      }
    }
    @else {
      @if $offset > 0 and $offset < 12 and $count != 12 {
        min-height: 1px;
        width: $onecol * $count + percentage($gutter) * ($count - 1);
        @if $width-only == false {
          margin-left: $onecol * $offset + percentage($gutter) * $offset;
          @if $flexbox-enabled == false {
            @if $right == true {
              float: right;
            }
            @else {
              float: left;
            }
          }
        }
      }
      @else {
        @if $count > 0 and $count <= 12 {
          width: $onecol * $count + percentage($gutter) * ($count - 1);
          @if $count == 12 {
            zoom: 1;
            clear: both;
            &:before,
            &:after {
              content: "";
              display: table;
            }
            &:after {
              clear: both;
            }
            @if $flexbox-enabled == true {
              display: -webkit-flex;
              display: -moz-flex;
              display: -ms-flex;
              display: -o-flex;
              display: flex;
            }
          }
          @else {
            min-height: 1px;
            @if $flexbox-enabled == false and $width-only == false {
              @if $push > 0 or $right == true {
                float: right;
              }
              @else {
                float: left;
              }
            }
            @if $push == 0 and $pull == 0 {
              @if $width-only == false {
                @if $first == true {
                  margin-left: 0;
                }
                @else {
                  margin: 0 0 0 percentage($gutter);
                }
                @if $no-first-child == false {
                  &:first-child {
                    margin-left: 0;
                  }
                }
              }
            }
            @else {
              @if $width-only == false {
                @if $pull > 0 and $pull <= 11 and $push == 0 {
                  margin: 0 percentage($gutter) 0 -($onecol * $pull);
                }
                @if $push > 0 and $push <= 11 and $pull == 0 {
                  margin: 0 -($onecol * $push) 0 percentage($gutter);
                }
              }
            }
          }
        }
      }
    }
  }
}
