(function(e,t,n){"use strict";function M(n){m.append('<div id="modal"><a class="close" href="#" title="Close">Close</a></div>');C=e("#modal");if(n.indexOf("youtube")>-1){var r=n.split("?v=")[1];C.prepend('<div class="vid-contain"><div class="vid">'+y.replace(w,r)+"</div></div>");A=c;k=C.find("iframe");_();k.click(function(e){e.stopPropagation()})}else{var s=new t.Image;s.onload=function(){C.prepend(s);k=C.find(a);A=u;_();k.click(function(e){e.stopPropagation()})};s.src=n}C.addClass(l);g.addClass(i);C.find(".close").click(function(e){e.preventDefault()});C.click(function(){D()})}function _(){k||(k=A===c?C.find("iframe"):C.find(a));L=A===c?k.closest(".vid-contain"):C.find(a);if(k.innerHeight()<d.height()){L.addClass(r);L.css({marginTop:"-"+Math.floor(k.innerHeight()/2)+f,marginLeft:"-"+Math.floor(k.outerWidth()/2)+f})}else{L.removeClass(r);L.css({marginTop:"0px",marginLeft:"auto"})}}function D(){if(C.length>0){g.removeClass(i);C.removeClass(l).addClass(s);setTimeout(function(){C.remove()},200);d.off("resize",_)}}var r="centered",i="fixed",s="hide",o="href",u="image",a="img",f="px",l="show",c="video",h=function(){},p=t.console||{log:h,warn:h,error:h},d=e(t),v=e("html"),m=e("body"),g=v.add(m),y='<iframe allowfullscreen frameborder="0" width="560" height="350" id="yt-{{{yt-id}}}" src="//www.youtube.com/embed/{{{yt-id}}}/?enablejsapi=1&amp;playerapiid={{{yt-id}}}&amp;wmode=transparent&amp;autohide=0&amp;autoplay=0&amp;fs=1&amp;hd=1&amp;rel=0&amp;showinfo=0&amp;start=&amp;theme=dark&amp;cc_load_policy=0"></iframe>',b="{{{yt-id}}}",w=new RegExp(b,"g"),E=e(".footnote"),S=e("footer"),x=S.find("#credits"),T=x.find("i"),N=e(".modal"),C,k,L,A,O;E.on("click",function(t){var n=e(this),r=n.attr(o);t.preventDefault();g.animate({scrollTop:e(r).offset().top-75},300)});N.on("click",function(t){t.preventDefault();M(e(this).attr(o))});e(n.documentElement).keyup(function(e){e.keyCode===27&&D()});d.resize(function(){k&&_()})})(jQuery,window,document);