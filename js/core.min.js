(function(e,t,n){"use strict";function M(n){m.append('<div id="modal"><a class="close" href="#" title="Close">Close</a></div>');k=e("#modal");if(n.indexOf("youtube")>-1){var r=n.split("?v=")[1];k.prepend('<div class="vid-contain"><div class="vid">'+y.replace(w,r)+"</div></div>");O=c;L=k.find("iframe");_();L.click(function(e){e.stopPropagation()})}else{var s=new t.Image;s.onload=function(){k.prepend(s);L=k.find(a);O=u;_();L.click(function(e){e.stopPropagation()})};s.src=n}k.addClass(l);g.addClass(i);k.find(".close").click(function(e){e.preventDefault()});k.click(function(){D()})}function _(){L||(L=O===c?k.find("iframe"):k.find(a));A=O===c?L.closest(".vid-contain"):k.find(a);if(L.innerHeight()<d.height()){A.addClass(r);A.css({marginTop:"-"+Math.floor(L.innerHeight()/2)+f,marginLeft:"-"+Math.floor(L.outerWidth()/2)+f})}else{A.removeClass(r);A.css({marginTop:"0px",marginLeft:"auto"})}}function D(){if(k.length>0){g.removeClass(i);k.removeClass(l).addClass(s);setTimeout(function(){k.remove()},200);d.off("resize",_)}}var r="centered",i="fixed",s="hide",o="href",u="image",a="img",f="px",l="show",c="video",h=function(){},p=t.console||{log:h,warn:h,error:h},d=e(t),v=e("html"),m=e("body"),g=v.add(m),y='<iframe allowfullscreen frameborder="0" width="560" height="350" id="yt-{{{yt-id}}}" src="//www.youtube.com/embed/{{{yt-id}}}/?enablejsapi=1&amp;playerapiid={{{yt-id}}}&amp;wmode=transparent&amp;autohide=0&amp;autoplay=0&amp;fs=1&amp;hd=1&amp;rel=0&amp;showinfo=0&amp;start=&amp;theme=dark&amp;cc_load_policy=0"></iframe>',b="{{{yt-id}}}",w=new RegExp(b,"g"),E=e(".footnote"),S=e("footer"),x=S.find("#credits"),T=x.find("i"),N=e("#party-mode"),C=e(".modal"),k,L,A,O;E.on("click",function(t){var n=e(this),r=n.attr(o);t.preventDefault();g.animate({scrollTop:e(r).offset().top-75},300)});C.on("click",function(t){t.preventDefault();M(e(this).attr(o))});T.click(function(){g.addClass(i);N.addClass(l);N.on("click",function(){e(this).removeClass(l);g.removeClass(i)})});e(n.documentElement).keyup(function(e){e.keyCode===27&&D()});d.resize(function(){L&&_()})})(jQuery,window,document);