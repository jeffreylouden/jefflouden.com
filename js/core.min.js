(function(e,t,n){"use strict";function _(n){g.append('<div id="modal"><a class="close" href="#" title="Close">Close</a></div>');L=e("#modal");if(n.indexOf("youtube")>-1){var r=n.split("?v=")[1];L.prepend('<div class="vid-contain"><div class="vid">'+b.replace(E,r)+"</div></div>");M=h;A=L.find("iframe");D();A.click(function(e){e.stopPropagation()})}else{var s=new t.Image;s.onload=function(){L.prepend(s);A=L.find(f);M=a;D();A.click(function(e){e.stopPropagation()})};s.src=n}L.addClass(c);y.addClass(i);L.find(".close").click(function(e){e.preventDefault()});L.click(function(){P()})}function D(){A||(A=M===h?L.find("iframe"):L.find(f));O=M===h?A.closest(".vid-contain"):L.find(f);if(A.innerHeight()<v.height()){O.addClass(r);O.css({marginTop:"-"+Math.floor(A.innerHeight()/2)+l,marginLeft:"-"+Math.floor(A.outerWidth()/2)+l})}else{O.removeClass(r);O.css({marginTop:"0px",marginLeft:"auto"})}}function P(){if(L.length>0){y.removeClass(i);L.removeClass(c).addClass(s);setTimeout(function(){L.remove()},200);v.off("resize",D)}}var r="centered",i="fixed",s="hide",o="href",u="id",a="image",f="img",l="px",c="show",h="video",p=function(){},d=t.console||{log:p,warn:p,error:p},v=e(t),m=e("html"),g=e("body"),y=m.add(g),b='<iframe allowfullscreen frameborder="0" width="560" height="350" id="yt-{{{yt-id}}}" src="//www.youtube.com/embed/{{{yt-id}}}/?enablejsapi=1&amp;playerapiid={{{yt-id}}}&amp;wmode=transparent&amp;autohide=0&amp;autoplay=0&amp;fs=1&amp;hd=1&amp;rel=0&amp;showinfo=0&amp;start=&amp;theme=dark&amp;cc_load_policy=0"></iframe>',w="{{{yt-id}}}",E=new RegExp(w,"g"),S=e(".footnote"),x=e("footer"),T=x.find("#credits"),N=T.find("i"),C=e("#party-mode"),k=e(".modal"),L,A,O,M;S.on("click",function(t){var n=e(this),r=n.attr(o);t.preventDefault();y.animate({scrollTop:e(r).offset().top-75},300)});k.on("click",function(t){t.preventDefault();_(e(this).attr(o))});N.click(function(){y.addClass(i);C.addClass(c);C.on("click",function(){e(this).removeClass(c);y.removeClass(i)})});e(n.documentElement).keyup(function(e){e.keyCode===27&&P()});v.resize(function(){A&&D()})})(jQuery,window,document);